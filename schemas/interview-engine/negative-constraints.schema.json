{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://proveniq.io/schemas/interview-engine/negative-constraints.schema.json",
  "title": "Interview Engine Negative Constraints",
  "type": "object",
  "required": ["version","prohibited_patterns","failure_modes"],
  "properties": {
    "version": { "type": "string" },
    "prohibited_patterns": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id","pattern","severity","notes"],
        "properties": {
          "id": { "type": "string" },
          "pattern": { "type": "string" },
          "severity": { "type": "string", "enum": ["block","warn"] },
          "notes": { "type": "string" }
        },
        "additionalProperties": false
      }
    },
    "failure_modes": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["id","trigger_condition","precursor_signal","prohibited_pattern_ids","fallback_route","fallback_text_template"],
        "properties": {
          "id": { "type": "string" },
          "trigger_condition": { "type": "string" },
          "precursor_signal": { "type": "string" },
          "prohibited_pattern_ids": { "type": "array", "items": { "type": "string" } },
          "fallback_route": { "type": "string" },
          "fallback_text_template": { "type": "string" }
        },
        "additionalProperties": false
      }
    }
  },
  "additionalProperties": false
}

